# Description
Веб-приложение для обработки и визуализации данных Foxhunt.

Приложение доступно по адресу http://foxhunt.httplab.ru

# API
Следует считать что по-умолчанию сервер возвращает JSON.

## Получить список лис:

    GET  /fix
    GET /foxex
    POST /foxex

## Изменить данные о лисе:
`POST /foxex/<id>`

Обрабатываемые параметры post-запроса: `name`, `lat`, `lon`
В случае если лиса с указанным id не найдена отрендерится соответвующее сообщение и статус 400. 

## Опубликовать fix:
`POST /fix`   
Обрабатываемые параметры post-запроса: `lat`, `lon`, `alt`, `acc`, `client_time`, `provider_id`, `device_id`, `user_id`, `speed`, `bearing`.
Если сохранить фикс не удалось, то сервер вернет json c  ошибками сохранения и статус 400
Время сервера сохраняется в столбце `created_at`.

## Список устройств c которых публиковались фиксы:
`GET /devices`

## Список пользователей:
`GET /users`

## Список устройств пользователя:
`GET /users/<id>/devices`
Если пользователь не найден, то сервер вернет соответвующее сообшение и статус 400.

# Deploy
Для деплоя изменений на сервер используется [Capistrano](https://github.com/capistrano/capistrano).
Опубликовать изменения: `cap deploy`
Остановить, запустить, перезапустить сервер: `cap deploy:[stop|start|restart]`

# TODO:

* Если сервер не запущен, то деплой закончится ошибкой, т.к. после деплоя capistrano попытается сделать `kill -s QUIT cat /path/to/unicorn.pid`, но файла с pid unicorn'a не будет.
* Смержить бранч [map](https://github.com/httplab/foxhunt-webapp/tree/map) c master.
* Разобраться с компиляцией BEM и либо написать для это capistrano task, либо использовать другое идеологически верное решение.
